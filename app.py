# -*- coding: utf-8 -*-
"""Untitled1.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/16z-JiaznCvHoCPte8ipAfBFjbHz1FBR-
"""

import streamlit as st
import numpy as np
import pandas as pd
import joblib

# --- Page Config ---
st.set_page_config(page_title="Salary Predictor", page_icon="ðŸ’°", layout="centered")

# --- Load Model ---
model_data = joblib.load("models/model.pkl")
model = model_data['model']
model_columns = model_data['columns']

# --- Custom CSS ---
st.markdown("""
    <style>
    /* Gradient background */
    .stApp {
        background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        color: white;
        font-family: 'Segoe UI', sans-serif;
    }
    /* Card style */
    .card {
        background-color: rgba(255,255,255,0.1);
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0px 4px 15px rgba(0,0,0,0.3);
        backdrop-filter: blur(5px);
    }
    h1, h2, h3 {
        color: #F7F9FB;
        text-align: center;
    }
    label, .stSelectbox label {
        color: #EAEAEA !important;
        font-weight: 500;
    }
    </style>
""", unsafe_allow_html=True)

# --- Title ---
st.markdown("<h1> AI Salary Prediction System</h1>", unsafe_allow_html=True)
st.markdown("<p style='text-align:center; color:#ddd;'>An intelligent salary estimator powered by Machine Learning</p>", unsafe_allow_html=True)
st.write("")

# --- Layout: Sidebar ---
st.sidebar.header("Model Information")
st.sidebar.write("**Algorithm Used:** Linear Regression")
st.sidebar.write("**Features Used:** Experience, Education, Role, Location")
st.sidebar.write("**Created By:** Arunava Bhol")
st.sidebar.markdown("---")
st.sidebar.info("Use the panel on the right to input your details.")

# --- Input Section ---
st.markdown("<div class='card'>", unsafe_allow_html=True)
st.subheader("Enter Your Details")

col1, col2 = st.columns(2)

with col1:
    experience = st.number_input("Years of Experience", min_value=0, max_value=50, value=3, step=1)
    education = st.selectbox("Education Level", ["Bachelors", "Masters", "PhD"])

with col2:
    job_role = st.selectbox("Job Role", ["Data Analyst", "Data Scientist", "ML Engineer", "Software Engineer"])
    location = st.selectbox("Location", ["Kolkata","Delhi", "Bangalore", "Pune", "Hyderabad","Chennai","Mumbai"])

st.markdown("</div>", unsafe_allow_html=True)
st.write("")

# --- Data Preparation ---
input_dict = {
    "Experience": [experience],
    "Education_Level": [education],
    "Job_Role": [job_role],
    "Location": [location]
}

input_df = pd.DataFrame(input_dict)
input_encoded = pd.get_dummies(input_df, drop_first=True)
input_encoded = input_encoded.reindex(columns=model_columns, fill_value=0)

# --- Predict Salary ---
if st.button("Predict My Salary"):
    prediction = model.predict(input_encoded)[0]
    st.markdown(
        f"""
        <div style='text-align:center; margin-top:30px;'>
            <h2> Estimated Salary: â‚¹{prediction:,.2f}</h2>
            <p style='color:#D4D4D4;'>Based on your profile and experience</p>
        </div>
        """, unsafe_allow_html=True
    )
